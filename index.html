<!doctype html>
<html>
  <head>
    <title>emi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="emi" property="og:title"/>
    <meta content=":3" property="og:description"/>
    <meta content="https://egirls.cc" property="og:url"/>
  </head>
  <style>
    body {
      background-color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .description {
      font-size: 20px;
      margin-bottom: 20px;
      color: #cccccc;
      text-shadow: 0px 0px 10px #fff;
      display: inline-block;
    }  

    .song-player-progress-bar-fill {
      height: 100%;
      background-color: #cccccc;
      border-radius: 5px;
      width: 0;
      transition: width 0.3s ease-in-out;
    }

    .song-player-controls {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .song-player-controls button {
      background-color: transparent;
      border: none;
      color: #cccccc;
      font-size: 20px;
      margin: 0 10px;
      cursor: pointer;
      transition: opacity 0.3s ease-in-out;
    }

    .song-player-controls button:hover {
      opacity: 0.7;
    }

    .song-player-time {
      color: #cccccc;
      margin-top: 10px;
    }

    @keyframes typing {
      from {
        width: 0;
      }
      to {
        width: 100%;
      }
    }
  </style>
  <body>
    <center>
      <div>
        <img src="https://cdn.discordapp.com/attachments/1140131764027797505/1141558935422259231/IMG_1770.gif">
      </div>
      <div class="description">
        <span class="typed"></span>
        <span class="cursor"></span>
      </div>
      <div class="song-player">
        <div class="song-player-progress-bar">
          <div class="song-player-progress-bar-fill"></div>
        </div>
        <div class="song-player-controls">
          <button id="playPauseButton" onclick="togglePlayPause()">
            <i class="fas fa-play"></i>
          </button>
        </div>
        <div class="song-player-time"></div>
      </div>
    </center>
    <audio id="bg-music" loop>
      <source src="music.mp3" type="audio/mpeg">
    </audio>
    <script>
      const typedTextSpan = document.querySelector(".typed");
      const cursorSpan = document.querySelector(".cursor");

      const textArray = ["discord.gg/emi"];
      const typingDelay = 100;
      const erasingDelay = 50;
      const newTextDelay = 1000;
      let textArrayIndex = 0;
      let charIndex = 0;

      function type() {
        if (charIndex < textArray[textArrayIndex].length) {
          if (!cursorSpan.classList.contains("typing")) cursorSpan.classList.add("typing");
            typedTextSpan.textContent += textArray[textArrayIndex].charAt(charIndex);
            charIndex++;
            setTimeout(type, typingDelay);
          } else {
            cursorSpan.classList.remove("typing");
                setTimeout(erase, newTextDelay);
        }
      }

      function erase() {
        if (charIndex > 0) {
          if (!cursorSpan.classList.contains("typing")) cursorSpan.classList.add("typing");
            typedTextSpan.textContent = textArray[textArrayIndex].substring(0, charIndex - 1);
            charIndex--;
            setTimeout(erase, erasingDelay);
          } else {
            cursorSpan.classList.remove("typing");
            textArrayIndex++;
            if (textArrayIndex >= textArray.length) textArrayIndex = 0;
              setTimeout(type, typingDelay + 1100);
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        if (textArray.length) setTimeout(type, newTextDelay + 250);
      });

      const songPlayerProgressBarFill = document.querySelector(".song-player-progress-bar-fill");
      const songPlayerControls = document.querySelector(".song-player-controls");
      const playPauseButton = document.getElementById("playPauseButton");
      const songPlayerTime = document.querySelector(".song-player-time");
      const bgMusic = document.getElementById("bg-music");

      function togglePlayPause() {
        if (bgMusic.paused) {
          bgMusic.play();
          playPauseButton.innerHTML = '<i class="fas fa-pause"></i>';
        } else {
          bgMusic.pause();
          playPauseButton.innerHTML = '<i class="fas fa-play"></i>';
        }
      }
      
      bgMusic.addEventListener("timeupdate", () => {
        const { currentTime, duration } = bgMusic;
        const progressPercent = (currentTime / duration) * 100;
        songPlayerProgressBarFill.style.width = `${progressPercent}%`;

        let currentMinutes = Math.floor(currentTime / 60);
        let currentSeconds = Math.floor(currentTime % 60);
        if (currentSeconds < 10) {
          currentSeconds = `0${currentSeconds}`;
        }

        let durationMinutes = Math.floor(duration / 60);
        let durationSeconds = Math.floor(duration % 60);
        if (durationSeconds < 10) {
          durationSeconds = `0${durationSeconds}`;
        }
        
        songPlayerTime.textContent = `${currentMinutes}:${currentSeconds} / ${durationMinutes}:${durationSeconds}`;
      });
      
      songPlayerControls.addEventListener("click", (e) => {
        const { target } = e;
        
        if (target && target.matches("button")) {
          togglePlayPause();
        }
      });
    </script>
  </body>
</html>
